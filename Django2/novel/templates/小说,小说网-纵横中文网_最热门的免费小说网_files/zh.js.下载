null!=window.Package&&void 0!=window.Package||(window.Package={}),null!=window.Class&&void 0!=window.Class||(window.Class={}),window.Package.create=function(e,n){var a=n.split(".");if(a.length<1)return null;for(var t=e,o=0;o<a.length;o++)null!=t[a[o]]&&void 0!=t[a[o]]||(t[a[o]]={}),t=t[a[o]];return e[a[0]]},window.Class.getInstance=function(e,n){return null!=n?new n:new function(){}};var ResourceManager={resources:{}};ResourceManager.setResource=function(e,n){return null==e||void 0==e?null:null==n||e==n?null:void(this.resources[e]=n)},ResourceManager.getResource=function(e,n){var a=this.resources[e];return null!=a&&void 0!=a?a:n},$.fn.extend({register:function(e){location.href="https://passport.baidu.com/v2/?reg&color=brown&tpl=zongheng&u="+encodeURIComponent(location.href)},login:function(e){$.isZhUser="-",document.ondblclick=null,document.onmousedown=null,document.onkeyup=null;var n=$(this),a=n.find("input[name=username]"),t=n.find("input[name=passwd]"),o=n.find("input[name=rand]"),s=n.find("img.captcha"),i=n.find("input[name=login]"),r=n.find(".errorMsg");if("false"!=a.attr("data-autofocus")&&a.focus().addClass("pass-zhinput-focus"),o.val(""),"true"!=n.attr("IsSetupEvent")){n.attr("IsSetupEvent","true");var l=function(e){e.stopPropagation(),13==e.keyCode&&i.click()};a.val(""),t.val(""),o.val(""),a.unbind(),t.unbind(),o.unbind(),s.unbind(),i.unbind(),a.click(function(e){e.stopPropagation()}),t.click(function(e){e.stopPropagation()}),o.click(function(e){e.stopPropagation()}),s.click(function(e){e.stopPropagation()}),i.click(function(e){e.stopPropagation()}),a.blur(function(){var e=$(this).val(),a=$(this).attr("oldval");null!=e&&$.trim(e).length>0&&e!=a&&($(this).attr("oldval",e),t.val(""),$.getScript(Domain.passportHostName+"/checkNativeUser.do?userName="+e,function(){"Y"!=$.isZhUser?"true"==n.attr("regBlank")&&window.confirm("此账号不存在，是否要注册纵横账号？")&&(window.top.location.href=Domain.passportHostName+"/reg.do?location="+location.href):$.getScript(Domain.passportHostName+"/checkCaptchaNecessary.do?userName="+e+"&callback=?&r="+Math.random(),function(){window.tempCaptchaNecessary&&(window.tempLogincode=4,n.getCaptcha(!1))})}))}),o.focus(function(){$(document).keydown(l)}),o.blur(function(){$(document).unbind("keydown",l)}),s.click(function(){n.getCaptcha(!1)}),n.find(".captcha_img_btn").click(function(){n.getCaptcha(!1)}),n.find(".user_register").unbind("click"),n.find(".user_register").click(function(){return"_blank"==$(this).attr("target")?(window.open(Domain.passportHostName+"/reg.do?location="+encodeURIComponent(window.location.href)),!1):(location.href=Domain.passportHostName+"/reg.do?location="+encodeURIComponent(window.location.href),!1)}),n.find(".forgot").click(function(){return location.href=Domain.passportHostName+"/forgotPassword.do?location="+encodeURIComponent(location.href),!1})}i.unbind("click"),i.click(function(){var s=this;if(""==a.val())return void r.html("请输入账号");if(""==t.val())return void r.html("请输入密码");if(window.tempLogincode&&window.tempLogincode>3&&""==o.val())return void r.html("请输入验证码");var l=n.find("input[name=location]");if((null==l.val()||$.trim(l.val()).length<1)&&l.val(location.href),"true"==n.attr("async")||"true"==n.attr("zasync")){var c=Domain.passportHostName+"/simpleLogin.do",d={username:a.val(),passwd:t.val(),rand:o.val(),target:"window.returnValue"},u=[];for(var p in d)u[u.length]=p+"="+encodeURIComponent(d[p]);c=c.indexOf("?")>-1||c.indexOf("&")>-1||c.indexOf("#")>-1?c+"&"+u.join("&"):c+"?"+u.join("&"),$.getScript(c,function(){window.user=UserManager.parse();var a=window.returnValue;return null==a&&(a={code:-1,message:"登录失败，请重新登录 !"}),window.tempLogincode=a.code,a.code>3?(o.val(""),n.getCaptcha(!1),r.html(a.message),!1):a.code>2?($(s).attr("disabled",!0),setTimeout(function(){$(s).attr("disabled",!1)},2e3),!1):(Dialog.close("login_panel"),void(null!=e?e(a):UserManager.callback(a)))})}else n.attr("method","post"),n.attr("action",Domain.passportHostName+"/signIn.do"),i.attr("disabled",!0),n.submit()})},getCaptcha:function(e){var n=this,a=n.find("input[name=username]");if(null==a.val()||$.trim(a.val()).length<1)return!1;if(1==e)$.getScript(Domain.passportHostName+"/checkNativeUser.do?userName="+a.val(),function(){if("Y"!=$.isZhUser)window.confirm("此账号不存在，是否要注册纵横账号？")?window.top.location.href=Domain.passportHostName+"/reg.do?location="+location.href:a.focus();else{var e=Domain.passportHostName+"/validateImage?r="+(new Date).getTime();n.find("img.captcha").attr("src",e),n.find("input[name=rand]").val(""),n.find("[id^='hidden_captcha_']").show()}});else{var t=Domain.passportHostName+"/validateImage?r="+(new Date).getTime();n.find("img.captcha").attr("src",t),n.find("input[name=rand]").val(""),n.find("[id^='hidden_captcha_']").show()}return!0}}),null!=window.UserManager&&void 0!=window.UserManager||(window.UserManager=Class.getInstance(null,Listener)),UserManager.addListener=function(e){throw new Error("UnsupportOperationException: UserManager.addListener")},UserManager.trigger=function(e){throw new Error("UnsupportOperationException: UserManager.trigger")},UserManager.parse=function(){var e=CookieUtil.getCookie("logon");if(null!=e&&""!=e){var n=e.split("|");if(n.length<7)return null;var a={};return a.userId=zhBase64.decode(n[0]),a.pwUserId=zhBase64.decode(n[1]),a.userName=zhBase64.decode(n[2]),a.nickName=zhBase64.decode(n[3]),a.enable=zhBase64.decode(n[4]),a}return null},UserManager.getUser=function(){return window.user},UserManager.callback=function(e){0==e.code||MessageDialog.open(e.message)},UserManager.login=function(e){location.href=Domain.passportHostName+"/?location="+encodeURIComponent(window.location.href)},UserManager.register=function(e){return location.href="https://passport.baidu.com/v2/?reg&color=brown&tpl=zongheng&u="+encodeURIComponent(location.href),!1},UserManager.logout=function(e,n){var a=location.href;return 0==e&&n&&(a=n),window.UserInfoManager.trigger(null),location.href="http://passport.zongheng.com/logout.do?callback="+a+"&rnd="+(new Date).getTime(),!1},UserManager.build=function(e){var n=[];if(null!=e&&void 0!=e){var n=[];n[n.length]='<div class="right_wrap">',n[n.length]='    <div class="info">',n[n.length]="        <ul>",n[n.length]='            <li id="user_info" class="name"><a class="userImage" href="'+Domain.homeHostName+'" target="_blank"><img src="http://static.zongheng.com/userimage/default/image_64_64.gif"/></a><a class="nickName" href="'+Domain.homeHostName+'" title="'+StringUtil.html(e.nickName)+'" target="_blank">'+StringUtil.substring(e.nickName,12,"…")+'</a><em class="userType vip_1" style="display: none;" title="VIP1级用户"></em><em class="whitesj"></em><em class="ver"></em></li>',n[n.length]='            <li class="mail"><a id="messagestatus" class="maillink" href="'+Domain.homeHostName+'/msgSys.do" target="_blank"><em class="ui-message-num">0</em></a><em class="ver"></em></li>',n[n.length]='            <li class="shelf"><em class="book"></em><a href="'+Domain.homeHostName+'/favoritesBook.do" target="_blank">书架</a></li>',n[n.length]="        </ul>",n[n.length]="    </div>",n[n.length]='    <div id="user_info_dialog" class="userinfo box" style="display: none;"></div>',n[n.length]='    <div id="mail_detail" class="mail_detail" style="display: none;"></div>',n[n.length]="</div>",n[n.length]='<div class="cl0"></div>'}else n[n.length]="";return n.join("")},null!=window.UserInfoManager&&void 0!=window.UserInfoManager||(window.UserInfoManager=Class.getInstance(null,Listener)),UserInfoManager.bind=function(e){null!=e&&1==e.ret?(this.userInfo=e,this.trigger(e)):UserManager.logout()},UserInfoManager.load=function(e){if(null!=window.user&&void 0!=window.user){var n={},a=$("body").attr("scriptSign");"charge"==a&&(n={bind:3}),$.ajax({type:"get",url:Domain.hostName+"/api/user/info.htm",dataType:"jsonp",data:n,async:!0,error:function(){},success:function(n){window.UserInfoManager.bind(n),null!=e&&e()}})}else window.UserInfoManager.trigger(null),null!=e&&e()},UserInfoManager.getUserInfo=function(){return this.userInfo},UserInfoManager.fixed=function(e){null==e.type&&(e.type=0),isNaN(parseInt(e.type))&&(e.type=0),null==e.level&&(e.level=1),isNaN(parseInt(e.level))&&(e.level=1),e.level=parseInt(e.level),null==e.userLevelScore||isNaN(e.userLevelScore)?e.userLevelScore=0:e.userLevelScore=parseInt(e.userLevelScore),null==e.nextUserLevelScore||isNaN(e.nextUserLevelScore)?e.nextUserLevelScore=100:e.nextUserLevelScore=parseInt(e.nextUserLevelScore),e.userLevelScore<=0&&(e.userLevelScore=0),e.nextUserLevelScore<=0&&(e.nextUserLevelScore=100);var n=e.userLevelScore/e.nextUserLevelScore;return(isNaN(n)||n<0)&&(n=0),n>1&&(n=1),e.percent=n,e},UserInfoManager.build=function(e){var n=[];return null!=e&&(this.fixed(e),n[n.length]='<div class="tx_info"><a class="userImage" href="'+Domain.homeHostName+'" target="_blank"><img src="http://static.zongheng.com/userimage/default/image_64_64.gif"/></a></div>',n[n.length]='<div class="set">',n[n.length]='    <div class="tc"><a class="setting" href="'+Domain.homeHostName+'/setting/userInfo.do" target="_blank">账号设置</a><a class="logout" href="javascript:void(0)" onclick="UserManager.logout();return false;">退出</a></div>',n[n.length]="    <p>"+UserInfoManager.getUserLevelIcons(e.level)+"</p>",n[n.length]="    <p>",e.type>0&&(n[n.length]='<em class="vip_'+e.type+'" title="VIP'+e.type+'级用户"></em>'),n[n.length]='<a href="'+Domain.bookHostName+'/member/privilege.html" target="_blank">查看我的VIP特权&gt;&gt;</a>',n[n.length]="    </p>",n[n.length]="</div>",n[n.length]='<div class="cl15"></div>',n[n.length]='<div class="piao">',n[n.length]='    <p>推荐票：<em class="voteNum">'+e.recomment+'</em>张<a href="'+Domain.hostName+'/help/zh93.html" target="_blank"><span class="tj_ticket"></span></a></p>',n[n.length]="    <p>纵横币：<em>"+e.money+'</em><span class="zh_money"></span><a href="http://pay.zongheng.com" target="_blank">[充值]</a></p>',n[n.length]='    <p class="last">月票：<em id="userMonthTicket">正在更新...</em>张<a href="'+Domain.hostName+'/help/zh93.html#q1" target="_blank"><span class="tj_ticket"></span></a></p>',n[n.length]="</div>"),n.join("")},UserInfoManager.getUserLevelIcons=function(e,n){var a=[];if(null!=e&&(e=parseInt(e),0==isNaN(e)&&e>0)){e=e<=21?e:21;var t=Math.floor(e/16),o=Math.floor((e-16*t)/4),s=e-16*t-4*o;null!=n&&void 0!=n?a[a.length]='<span class="leval" title="用户等级：'+e+"级&nbsp;（"+n+'）">':a[a.length]='<span class="leval" title="用户等级：'+e+'级">';for(var i=0;i<t;i++)a[a.length]='<span class="level_sun"></span>';for(var i=0;i<o;i++)a[a.length]='<span class="level_moon"></span>';for(var i=0;i<s;i++)a[a.length]='<span class="level_star"></span>';a[a.length]="</span>"}return a.join("")},UserInfoManager.getUserInfo=function(){return this.userInfo},UserInfoManager.serialize=function(e){var n=[];if(null!=e&&"object"==typeof e)for(var a in e){var t=e[a],o=typeof t;if(null!=t)if("object"==o&&null!=t.length)for(var s=0;s<t.length;s++)null!=t[s]&&(n[n.length]=encodeURIComponent(a)+"="+encodeURIComponent(t[s]));else n[n.length]=encodeURIComponent(a)+"="+encodeURIComponent(t.toString())}return n.join("&")},UserInfoManager.setMessageNumber=function(e){var n=$("#messagestatus .ui-message-num");if(n.size()>0){var a=parseInt(n.attr("messageNumber"));(isNaN(a)||a<0)&&(a=0),e=parseInt(e),(isNaN(e)||e<0)&&(e=0),a+=e,n.attr("messageNumber",a),n.html(a>99?99:a),a>0&&$("#messagestatus").addClass("active")}},UserManager.crossPass=function(e,n){$.ajax({url:"http://zongheng.baidu.com/getbduss.do",type:"GET",dataType:"jsonp",data:{ret:e},success:function(e){if(window.user=UserManager.parse(),UserInfoManager.load(n),Dialog.close("login_panel"),0==e.token||e.token==-1){var a='<div class="sign_done_box" id="newBDPUsr"><div class="tit"><span class="zh_logo"></span><em class="close" onclick="Dialog.close(\'newBDPUsr\')">关闭</em></div><div class="con"><p align="center">Hi,'+user.nickName+'，您已经成功注册纵横账号。</p><div class="tr"><a href="javascript:void(0);" id="oldUsrLogin" class="login">我是纵横老用户，登录<b>&gt;&gt;</b></a></div><div class="recommend"><h3>大家都在看</h3><em class="icon"></em><div></div><ul class="book_box" id="uewUsrtBook"></ul></div><div><a class="btn" href="javascript:void(0);" id="newUsrAdf">一键收藏</a></div></div></div>';$("body").append(a),$("#oldUsrLogin").click(function(){Dialog.close("newBDPUsr"),UserManager.login(),_hmt.push(["_trackEvent","newGuide","oldLogin"])}),$("#newUsrAdf").click(function(){if($(this).attr(!1))return!1;for(var e={num:0,code:0},n=0;n<4;n++)$.ajax({type:"get",url:"/api/bookshelf.htm",data:{bookId:$("#uewUsrtBook li:eq("+n+")").attr("bookId"),rnd:(new Date).getTime()},async:!0,dataType:"json",error:function(){$("#newUsrAdf").attr("added",0)},timeout:1e4,success:function(n){e.code++,0==n.code?e.num++:(e.num--,e.num<0&&(e.num=0)),4==e.code&&(4==e.num?MessageDialog.open("已全部添加",function(){Dialog.close("newBDPUsr")}):MessageDialog.open("成功添加"+e.num+"本",function(){Dialog.close("newBDPUsr")})),$("#newUsrAdf").attr("added",1)}});_hmt.push(["_trackEvent","newGuide","addAllfav"])}),$.ajax({type:"get",url:"/api/rank/getZongHengMonthTicketRankList.htm",data:{rankType:1,pageNum:1,pageSize:10},async:!0,dataType:"json",error:function(){},timeout:1e4,success:function(e){if(null!=e&&null!=e.length){for(var n=[],a=0;a<4;a++){var t=Math.floor(Math.random()*e.length),o=e[t];o.bookId!=$("body").attr("bookId")&&0!=o&&(n[n.length]="<li bookId="+o.bookId+'><a href="'+Domain.bookHostName+"/book/"+o.bookId+'.html?from=newbieguide" title="'+StringUtil.html(o.bookName)+"\" target=\"_blank\" onclick=\"_hmt.push(['_trackEvent', 'newGuide', 'bookClick_"+parseInt(a+1)+"','"+o.bookId+'\']);"><img src="http://static.zongheng.com/upload/'+o.cover+'" width="104" height="139"></a></li>',e.splice(t,1))}$("#uewUsrtBook").html(n.join(""))}}}),Dialog.open("newBDPUsr")}}})},UserManager.buildDialogHtml=function(e){function n(){window.passport.use("login",{tangram:!0},function(n){var a=new n.passport.login({product:"zongheng",staticPage:location.protocol+"//"+location.hostname+"/v3Jump.html",u:location.href,charset:"utf-8",memberPass:!0,hasRegUrl:!0,loginType:2,defaultCss:!1,loginMerge:!0,autosuggest:!0,hasPlaceholder:!0,authsiteLogin:["qzone","tsina"],registerLink:"https://passport.baidu.com/v2/?reg&color=brown&tpl=zongheng&u="+encodeURIComponent(location.href),authsiteCfgLogin:{act:"implicit",jumpUrl:location.protocol+"//"+location.hostname+"/xd.html",onBindSuccess:function(n,a){return UserManager.crossPass(1,e),!1}},onSubmitedErr:function(e){console.log(e)},sms:!0,isPhone:!1,safeFlag:0});a.on("loginError",function(e){18==e.rsp.errInfo.no&&Dialog.close("login_panel")}),a.on("loginSuccess",function(n){n.returnValue=!1,UserManager.crossPass(1,e)}),a.render("zongheng_pass_wap")})}if($("#login_panel").length>0)return Dialog.open("login_panel"),!1;var a='<div id="login_panel" class="log_reg_box updiv"><div class="tit"><div id="udlg_tab"><span class="current" tabId="1">纵横账号登录</span> | <span tabId="2" statId="regtab">百度账号登录</span></div><em class="close">关闭</em></div><div class="con"><div class="tab_log_reg tabpanel" tabId="1">';a+='<form name="login_form" method="post" async="true" zasync="true"><div class="login_box tang-pass-login"><div id="errorMsg" class="errorMsg"></div><p class="pass-form-item pass-form-item-userName"><label for="TANGRAM_zh_userName" class="pass-label pass-label-userName">纵横账号</label><input type="text" name="username" class="pass-text-input pass-text-input-userName" autocomplete="off" placeholder="纵横账号"></p><p class="pass-form-item pass-form-item-password"><label for="TANGRAM_zh_password" class="pass-label pass-label-password">密 码</label><input type="password" name="passwd" class="pass-text-input pass-text-input-password" placeholder="密 码"></p><p id="hidden_captcha_0" class="pass-form-item pass-form-item-verifyCode yzm" style="display: none; visibility: visible; opacity: 1;"><label for="TANGRAM_zh_verifyCode" class="pass-label pass-label-verifyCode">验证码</label><input id="TANGRAM_zh_verifyCode" type="text" name="rand" class="pass-text-input pass-text-input-verifyCode" maxlength="6" placeholder="验证码"><span class="pass-verifyCodeImgParent"><img class="pass-verifyCode validate captcha" src="http://passport.zongheng.com/validateImage?r="></span><a class="pass-change-verifyCode captcha_img_btn" href="javascript:void(0);">&nbsp;看不清楚？</a></p><p class="pass-form-item pass-form-item-submit"><input name="login" type="button" value="登录" class="pass-button pass-button-submit enter" style="background:#900c1c"><a class="pass-reglink" href="https://passport.baidu.com/v2/?reg&color=brown&tpl=zongheng&u='+encodeURIComponent(location.href)+'" target="_blank">立即注册</a><a class="pass-fgtpwd forgot" href="javascript:void(0);">忘记密码？</a></p>',a+='<div class="tang-pass-login-phoenix" style="margin:0"><div class="pass-phoenix-title">可以使用以下方式登录<span class="pass-phoenix-note"></span></div><div class="pass-phoenix-list clearfix"><div class="pass-phoenix-btn clearfix"><ul class="bd-acc-list other_login" style="position:relative"><li class="bd-acc-qzone" ><a class="phoenix-btn-item js_qq_login" href="javascript:void(0);" title="QQ帐号">QQ帐号</a></li><li style="width:334px;height:29px;background:url(http://static.zongheng.com/v2014/images/bdpass/qqalert.png);position:absolute;float:left;margin-top:-2px;left:20px"></li></ul></div></div><div class="clear"></div></div>',a+='</div></form></div><div class="tab_log_reg tabpanel" tabId="2" style="display:none"><div class="baidupassinner"><div id="zongheng_pass_wap"></div></div><div class="cl0"></div></div></div></div>',$("body").append(a),Dialog.open("login_panel");var t=$("#login_panel"),o=$("#login_panel").find("form[name=login_form]");o.login(UserManager.callback),o.find(".pass-text-input").focus(function(){$(this).addClass("pass-zhinput-focus")}),o.find(".pass-text-input").blur(function(){$(this).removeClass("pass-zhinput-focus")}),o.find(".user_register").unbind(),o.find(".forgot").unbind().attr("href",Domain.passportHostName+"/forgotPassword.do"),o.find(".other_login a.js_qq_login").click(function(){var e=function(){var e="http://openapi.qzone.qq.com/oauth/show?which=Login&response_type=code&client_id=100300893&redirect_uri="+encodeURIComponent("http://passport.zongheng.com/qqLogin.do?"+location.href)+"&scope=get_user_info,list_album,upload_pic";return location.href=e,!1};window.top.eval("("+e.toString()+")()")}),$(".dlg_register").click(function(){return window.open("https://passport.baidu.com/v2/?reg&tpl=zongheng&u="+encodeURIComponent(window.location.href)),!1});t.find(".close").click(function(){Dialog.close("login_panel")}),t.find("#udlg_tab span").click(function(){var e=$(this).attr("tabId");if("1"==e)return location.href=Domain.passportHostName+"/?logintype=zh&location="+encodeURIComponent(window.location.href),!1;if(null!=e){CookieUtil.setCookie({name:"lgpType",value:e,expires:31104e3,path:"/",domain:".zongheng.com"}),$(this).siblings().removeClass("current"),$(this).addClass("current");var n=$(this).closest(".tit").siblings("div.con");n.find("div.tabpanel").hide(),n.find("div.tabpanel[tabId="+e+"]").show(),Dialog.setSize(t.width(),t.height()),Dialog.center("login_panel")}}),$("#udlg_tab span[tabId=2]").click(),$.browser.msie&&"6.0"==$.browser.version&&!$.support.style?require(["http://passport.baidu.com/passApi/js/wrapper.js?cdnversion="+(new Date).getTime()],function(){n()}):$.getScript("http://passport.baidu.com/passApi/js/wrapper.js?cdnversion="+(new Date).getTime(),function(){n()})},UserManager.hideMessageNumber=function(){var e=0;null!=window.user&&(e=window.user.userId),CookieUtil.setCookie({name:"userMessage_"+e,value:"1",expires:180,path:"/",domain:".zongheng.com"}),$("#messagestatus").parent().unbind("mouseover"),$("#messagestatus").removeClass("active")},function(){window.user=UserManager.parse(),null!=window.user&&void 0!=window.user||(window.user=null)}(),$(function(){$(".homepage").click(function(){if($.browser.msie)document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(location.href);else if($.browser.mozilla){try{return void netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return void MessageDialog.open("此操作被浏览器拒绝！\n请在浏览器地址栏输入“about:config”并回车\n然后将[signed.applets.codebase_principal_support]设置为'true'")}try{var n=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);return void n.setCharPref("browser.startup.homepage",location.href)}catch(e){}MessageDialog.open("您的浏览器不支持此操作, 请使用浏览器设置功能进行添加 !")}return!1}),$(".homemark").click(function(){var e="纵横中文网",n=Domain.hostName;if(null!=window.sidebar){try{if(null!=window.sidebar.addPanel)return void window.sidebar.addPanel(e,n,"")}catch(a){}return void MessageDialog.open("请按Ctrl+D键收藏 !")}if(null!=window.external){try{return void window.external.addFavorite(n,e)}catch(a){}try{return void window.external.addToFavoritesBar(n,e,"slice")}catch(a){}}return MessageDialog.open("您的浏览器不支持此操作, 请使用浏览器的收藏夹进行添加 !"),!1})}),$(function(){null!=window.user&&UserInfoManager.load(),$(".user_register").unbind("click").click(function(){return"_blank"==$(this).attr("target")?window.open("http://passport.zongheng.com/webreg?location="+encodeURIComponent(window.location.href)):location.href="http://passport.zongheng.com/webreg?location="+encodeURIComponent(window.location.href),!1}),$(".user_login").unbind("click").click(function(){location.href=Domain.passportHostName+"/?location="+encodeURIComponent(window.location.href)}),$(".forgot").click(function(){return"_blank"==$(this).attr("target")?window.open(Domain.passportHostName+"/forgotPassword.do?location="+encodeURIComponent(window.location.href)):location.href=Domain.passportHostName+"/forgotPassword.do?location="+encodeURIComponent(window.location.href),!1}),$(".logout").click(function(){return UserManager.logout(),!1})}),UserInfoManager.addListener(function(e){null!=e?($("#top-user-nav-bar").attr("class","load"),$("#top-user-nav-bar").html(UserManager.build(window.user)),e.type>0&&($("#user_info .userType").attr("class","userType vip_"+e.type),$("#user_info .userType").attr("title","VIP"+e.type+"级用户"),$("#user_info .userType").show())):$("#top-user-nav-bar").attr("class","unload")}),UserInfoManager.addListener(function(e){null!=e&&($("#user_info_dialog").html(UserInfoManager.build(e)),$("#user_info a.userImage img").attr("src",e.image),$("#user_info_dialog a.userImage img").attr("src",e.image),$("#user_info").hover(function(){$(this).addClass("menu_hover"),$("#user_info_dialog").show(),"1"!=$("#userMonthTicket").attr("data-loaded")&&($("#userMonthTicket").attr("data-loaded","1"),$.ajax({type:"get",url:"http://www.zongheng.com/api/user/getMemberTicket.htm",dataType:"jsonp",error:function(){},success:function(e){if("0"==e.code&&null!=e.memberTicket){var n=parseInt(e.memberTicket),a=parseInt(e.voteMemberTicket);if(0==isNaN(n)){var t=UserInfoManager.getUserInfo();t.memberTicket=n,t.voteMemberTicket=a,$("#userMonthTicket").html(n)}}}}))},function(){$(this).removeClass("menu_hover"),$("#user_info_dialog").hide()}),$("#user_info_dialog").hover(function(){$("#user_info").addClass("menu_hover"),$(this).show()},function(){$("#user_info").removeClass("menu_hover"),$(this).hide()}))}),UserInfoManager.addListener(function(e){if(null!=e&&void 0!=e){var n=CookieUtil.getCookie("userMessage_"+window.user.userId);if("1"!=n){var a=[];a[a.length]='<div class="title">',a[a.length]='    <span class="closemail" onclick="$(\'#mail_detail\').hide();"></span>',a[a.length]="</div>",a[a.length]='<div id="userMessageList" class="con">',a[a.length]='    <p><a class="userMessageButton" href="'+Domain.homeHostName+'/msgIn.do" target="_blank">查看</a>有<em id="usermessage">('+e.message+")</em>条未读站内信息</p>",a[a.length]="</div>",$("#mail_detail").html(a.join("")),$("#messagestatus").parent().hover(function(){$("#messagestatus").parent().addClass("mail_hover"),$("#mail_detail").show()},function(){$("#messagestatus").parent().removeClass("mail_hover"),$("#mail_detail").hide()}),$("#mail_detail").hover(function(){$("#messagestatus").parent().addClass("mail_hover"),$(this).show()},function(){$("#messagestatus").parent().removeClass("mail_hover"),$(this).hide()}),null!=e.message&&e.message>0&&(UserInfoManager.setMessageNumber(e.message),$("#usermessage").html("("+e.message+")"),$("#messagestatus").click(function(){UserManager.hideMessageNumber()}),$("#userMessageList .userMessageButton").click(function(){UserManager.hideMessageNumber()})),$.ajax({type:"get",url:"http://home.zongheng.com/show/ajax/inviteNum.do?userId="+window.user.userId,dataType:"jsonp",async:!0,error:function(){},success:function(e){if(null!=e&&null!=e.count){var n=parseInt(e.count);isNaN(n)&&(n=0),n>0&&($("#userMessageList").append('<p><a class="moderatorMessageButton" href="'+Domain.homeHostName+'/msgInvite.do" target="_blank">查看</a>有<em id="moderatorMessage">('+n+")</em>条副版主邀请</p>"),$("#messagestatus").addClass("active"),$("#userMessageList .moderatorMessageButton").click(function(){}))}}})}}}),$(function(){var e=$("form[name=searchForm]"),n=e.find("input[name=keyword]");n.val(n.attr("defaultDataValue")),e.find(".select").hover(function(){e.find(".listpanel").show()},function(){e.find(".listpanel").hide()}),e.find(".listpanel").hover(function(){e.find(".listpanel").show()},function(){e.find(".listpanel").hide()}),e.find("input[name=keyword]").change(function(){return""==this.value.replace(/(^\s*)|(\s*$)/g,"")&&(this.value=this.getAttribute("defaultDataValue")),!1}),e.find("input[name=keyword]").keydown(function(n){return n=n||window.event,13!=n.keyCode||(e.find("input.sousuo").click(),!1)}),e.find("input[name=keyword]").focus(function(e){this.value==this.getAttribute("defaultDataValue")&&(this.value="")}),e.find("input[name=keyword]").blur(function(e){""==this.value.replace(/(^\s*)|(\s*$)/g,"")&&(this.value=this.getAttribute("defaultDataValue"))}),e.find("ul.selecttext li a").click(function(n){return n=n||window.event,e.find("input[name=searchType]").val(this.getAttribute("type")),e.find("span.select").html(this.innerHTML+"<em></em>"),e.find("span.select").click(),null!=n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,n.preventDefault&&n.preventDefault(),n.cancel=!0,n.returnValue=!1),e.find(".listpanel").hide(),!1}),e.find("input.sousuo").click(function(){var e=this.form.keyword.value.replace(/(^\s*)|(\s*$)/g,"");return"书名/作者/标签"!=e&&""!=e&&("search.zongheng.com"==location.host?location.href="http://search.zongheng.com/search/"+this.form.searchType.value+"/"+encodeURI(e)+"/1.html":window.open("http://search.zongheng.com/search/"+this.form.searchType.value+"/"+encodeURI(e)+"/1.html","_blank")),!1}),$("#ui_top_nav_button").hover(function(){$(this).addClass("mail_hover"),$("#ui_top_nav_dialog").show()},function(){$(this).removeClass("mail_hover"),$("#ui_top_nav_dialog").hide()}),$("#ui_top_nav_dialog").hover(function(){$("#ui_top_nav_button").addClass("mail_hover"),$(this).show()},function(){$("#ui_top_nav_button").removeClass("mail_hover"),$(this).hide()});var a=document.body.clientWidth;if(a<1050){var t=$("#hidetbar");$("#hidetbar").remove(),$("#topbar_main").prepend(t),$("#hidetbar").css({position:"relative",right:"0"})}$(".logonbox").dblclick(function(e){var n=e.srcElement||e.target;if(null==n)return!0;var a=n.nodeName.toLowerCase();return"a"==a||"input"==a||"select"==a||($("#hidetbar").click(),!1)}),$("#hidetbar").click(function(){var e=$(this);return"close"==e.attr("class")?($("#topnavbar").css("top","-35px"),e.attr("class","open"),$("#zh_header").css("padding-top","2px"),$("body").css("background-position","center -7px"),CookieUtil.setCookie({name:"zh_topnavbar",value:"true",path:"/",domain:".zongheng.com"}),document.cookie="zh_topnavbar=true;path=/;domain=.zongheng.com"):($("#topnavbar").css("top","0px"),e.attr("class","close"),$("#zh_header").css("padding-top","37px"),$("body").css("background-position","center 28px"),CookieUtil.setCookie({name:"zh_topnavbar",value:"false",path:"/",domain:".zongheng.com"})),!1});var o=CookieUtil.getCookie("zh_topnavbar");"true"==o&&$("#hidetbar").click()});